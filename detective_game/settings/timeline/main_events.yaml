# 主要世界事件时间线
events:
  # ============ 第1天 ============
  - id: game_start
    trigger:
      day: 1
      time: morning
    type: narrative
    text: |
      阳光明媚的早晨，你和音乐社团的成员们一起来到了这栋偏僻的别墅。
      这里将举行为期三天的夏季合宿。
      每个人都很兴奋，殊不知噩梦即将开始...
    effects: []

  - id: villa_tour
    trigger:
      day: 1
      time: morning
    type: narrative
    text: |
      上杉社长带领大家参观了别墅。
      这是一栋古老而宏伟的建筑，有很多房间等待探索。
    effects:
      - scene_unlock: [living_room, dining_room, kitchen, library, study, garden]

  - id: afternoon_activity
    trigger:
      day: 1
      time: afternoon
    type: narrative
    text: |
      下午，大家分散开来，各自活动。
      有人在音乐室练习，有人在图书室阅读...
    effects: []

  - id: strange_noise
    trigger:
      day: 1
      time: evening
    type: narrative
    text: |
      傍晚时分，远处传来奇怪的声音。
      像是很多人在嘶吼...
    effects: []

  - id: zombie_outbreak
    trigger:
      day: 1
      time: night
    type: critical
    text: |
      ！！！紧急情况！！！
      窗外出现了大量行动诡异的人影！
      他们不是正常人——是丧尸！
      别墅被包围了，所有人都被困在里面！
    effects:
      - set_flag: {zombies_appeared: true}
      - scene_lock: garden
      - scene_lock_message: {garden: "外面太危险了，丧尸正在徘徊！"}

  - id: first_murder
    trigger:
      day: 1
      time: night
    type: crime
    actor: uesugi
    victim: victim_1
    text: |
      混乱之中，没有人注意到�的场川失踪了...
      直到第二天早上。
    effects:
      - set_flag: {first_murder_happened: true}
      - actor_status: {victim_1: dead}

  # ============ 第2天 ============
  - id: body_discovered
    trigger:
      day: 2
      time: morning
    type: critical
    text: |
      ！！！发现尸体！！！
      有人在储藏室发现了�的场川的尸体！
      他的后脑被重物击中，已经死亡多时。
      在丧尸包围的别墅里，竟然发生了谋杀案！
    effects:
      - set_flag: {first_body_discovered: true}
      - scene_unlock: storage_room
      - clue_available: [bloody_pipe, blood_stain, investigation_notebook]

  - id: tension_rising
    trigger:
      day: 2
      time: noon
    type: narrative
    text: |
      恐惧在众人之间蔓延。
      外面是丧尸，里面有杀人凶手...
      每个人都开始怀疑彼此。
    effects: []

  - id: shingo_discovers_truth
    trigger:
      day: 2
      time: afternoon
    type: narrative
    condition:
      flag: first_body_discovered
    text: |
      进藤似乎发现了什么，表情变得很奇怪...
      他频繁地观察着上杉。
    effects:
      - set_flag: {shingo_suspicious: true}

  - id: shingo_blackmail
    trigger:
      day: 2
      time: evening
    type: hidden
    condition:
      flag: shingo_suspicious
    text: null  # 隐藏事件，不显示文字
    effects:
      - set_flag: {shingo_knows_secret: true}

  - id: second_murder
    trigger:
      day: 2
      time: night
    type: crime
    condition:
      flag: shingo_knows_secret
    actor: uesugi
    victim: shingo
    text: |
      又一个夜晚，又一场悲剧。
      进藤没有等来黎明...
    effects:
      - set_flag: {second_murder_happened: true}
      - actor_status: {shingo: dead}

  # ============ 第3天 ============
  - id: second_body_discovered
    trigger:
      day: 3
      time: morning
    type: critical
    condition:
      flag: second_murder_happened
    text: |
      ！！！又发现尸体！！！
      进藤死在了音乐室！
      他的嘴唇发紫，明显是中毒身亡。
      凶手还在我们中间！
    effects:
      - set_flag: {second_body_discovered: true}
      - clue_available: [poisoned_cup, hidden_note_in_case, suspicious_bottle]

  - id: zombies_weaken
    trigger:
      day: 3
      time: noon
    type: narrative
    text: |
      不知为何，外面丧尸的活动开始减弱。
      也许还有逃出去的希望...
      但首先，必须找出凶手！
    effects: []

  - id: final_confrontation
    trigger:
      day: 3
      time: evening
    type: narrative
    text: |
      时间不多了。
      如果不能在今晚之前找出凶手，
      可能就再也没有机会了...
    effects: []

  - id: game_deadline
    trigger:
      day: 3
      time: night
    type: critical
    text: |
      救援队即将到来。
      这是指认凶手的最后机会！
    effects:
      - set_flag: {game_ending: true}

