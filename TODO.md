# 📋 开发任务清单

## 🎯 当前 Sprint：核心玩法完善

### 🔥 高优先级（本周完成）

#### 1. 讨论机制实现
- [ ] 实现讨论阶段的发言顺序控制
  - [ ] 按玩家顺序轮流发言
  - [ ] 记录当前发言者
  - [ ] 支持跳过发言
  
- [ ] NPC 发言生成
  - [ ] 设计发言 Prompt 模板
  - [ ] 根据身份生成不同的发言风格
  - [ ] 整合游戏历史信息（谁在哪里、发生了什么）
  
- [ ] 讨论时间控制
  - [ ] 设置讨论总时长
  - [ ] 每人发言时间限制
  - [ ] 自动结束讨论

**负责人**：_待分配_  
**预计时间**：2-3 天  
**依赖**：无

#### 2. 投票系统完善
- [ ] NPC 投票逻辑
  - [ ] 设计投票决策 Prompt
  - [ ] 根据讨论内容决定投票目标
  - [ ] 不同身份不同的投票策略（坏人投给好人、好人投给可疑者）

- [ ] 投票结果处理
  - [ ] 统计票数
  - [ ] 处理平票情况
  - [ ] 显示被放逐者身份
  - [ ] 检查特殊胜利条件（小丑）

**负责人**：_待分配_  
**预计时间**：1-2 天  
**依赖**：讨论机制

#### 3. NPC 自主行动（基础版）
- [ ] 智能移动
  - [ ] 坏人：寻找落单目标
  - [ ] 好人：做任务或寻找目击证人
  - [ ] 考虑当前位置和游戏状态

- [ ] 杀人策略
  - [ ] 检查冷却时间
  - [ ] 选择合适的目标和时机
  - [ ] 避免被目击

- [ ] 对话互动
  - [ ] NPC 之间可以对话
  - [ ] 讨论可疑行为
  - [ ] 形成小团体

**负责人**：_待分配_  
**预计时间**：3-4 天  
**依赖**：基础游戏逻辑

### 🔥🔥 中优先级（下周）

#### 4. 任务系统
- [ ] 任务分配
  - [ ] 给好人分配任务
  - [ ] 任务进度跟踪
  
- [ ] 任务完成判定
  - [ ] 好人需要完成所有任务
  - [ ] 任务完成进度显示
  
- [ ] 坏人假装做任务
  - [ ] 可以伪装完成任务

**负责人**：_待分配_  
**预计时间**：2 天  
**依赖**：NPC 自主行动

#### 5. 高级对话系统
- [ ] 实时对话
  - [ ] 玩家与 NPC 实时对话
  - [ ] 支持出示证据、质疑
  
- [ ] 对话记忆
  - [ ] NPC 记住之前的对话
  - [ ] 发现矛盾时提醒玩家

**负责人**：_待分配_  
**预计时间**：2-3 天  
**依赖**：讨论机制

### 🔥🔥🔥 低优先级（后续优化）

#### 6. UI/UX 优化
- [ ] 动画效果
- [ ] 音效
- [ ] 地图可视化改进

#### 7. 游戏平衡
- [ ] 角色平衡调整
- [ ] 难度等级
- [ ] 新手教程

## ✅ 已完成任务

### 第一周
- [x] 项目重构决策（侦探游戏 → 鹅鸭杀）
- [x] 身份系统设计
  - [x] 角色模型定义
  - [x] 阵营系统
  - [x] 能力系统
- [x] 地图系统设计
  - [x] 房间配置
  - [x] 连通性设计
- [x] 基础游戏逻辑
  - [x] 游戏状态管理
  - [x] 基础动作（移动、杀人、报警）
  - [x] 胜利条件检查
- [x] 前端界面
  - [x] 游戏主界面
  - [x] 地图可视化
  - [x] 事件日志
- [x] API 接口
  - [x] REST API 设计
  - [x] 游戏状态接口
  - [x] 动作执行接口

## 📊 进度统计

| 阶段 | 进度 | 预计完成 |
|------|------|----------|
| 基础框架 | 100% | ✅ 已完成 |
| 核心玩法 | 40% | 本周 |
| LLM 集成 | 20% | 下周 |
| 优化完善 | 0% | 后续 |

**总体进度**：约 40%

## 🎯 里程碑

- [x] **M1：基础框架完成** (Week 1) ✅
- [ ] **M2：核心玩法完善** (Week 2) - 进行中
- [ ] **M3：LLM 能力展示** (Week 3)
- [ ] **M4：优化与展示** (Week 4)

---

**最后更新**：2024-12-19

